
import { useState } from 'react';
import './App.css';
import Navbar from './Nevbar/Nevbar';
import Heading from './Heading/Heading';
import Option from './option/Option';


function App() {
    const[data1,setdata]=useState("");
    const[show,setShow]=useState(false);
    const[res,setres]=useState("");
    const[copy,setCopy]=useState('');
    const[showCopy,setShowCopy]=useState(false);
    async function userData(){
      try{
        const user={
            redirectURL:data1,
        }
        const data=await fetch("https://shorturl-web.up.railway.app/user",{
            method:"POST",
            headers:{
                "Content-type":"application/json",
                "Access-control-Allow-Origin":"*",
            },
         body:JSON.stringify(user),

        })
        const respon=await data.json();
        setres(respon);
        
        setShow(true);
      }
      catch{
        console.log("failed to connect with internet");
        
      }
        
    }
   
///////////copy to clipboard function
async function clipboard() {
  try{
    await navigator.clipboard.writeText(`shorturl-web.up.railway.app/${res.id}`);
    setCopy("Link copy");
    setShowCopy(true);
    setTimeout(()=>{setCopy("")},1000);
    setTimeout(()=>setShowCopy(false),1000);
  }
  catch(err){
    console.log(err,"text not copy");
  }
}
/// for input data
function inpData(e){
  setdata(e.target.value);
  setShow(false);
}
 return(
 <>
 <Navbar/>
 <Heading/>
<Option/>
 <div  className='shortPortion'>
    <div className='media'>
 <input id='inp' type="text" placeholder='Paste your link' onChange={inpData}/>
 <button id='btn' onClick={userData}>Make short url</button>
 </div>

  <div className='shrink'>
 <div className='hello'>
  <p id='urlData'>Original Url : <span id='danda'>{data1}</span></p>
  </div>

 </div>
 {/* show hide function of short Link  */}
{
show?
<div id='CopyLinkDi'>
  <div className='short'>

  <p id='shorturl'>your short url is:<span id='result'>{`shorturl-web.up.railway.app/${res.id}`}</span></p>


<button id='copy' onClick={clipboard}>Copy Link</button>
  
  
{showCopy?<p id='clip'>{copy}</p>:""}
</div>


</div>:null
}

</div>

 </>
 )
}

export default App;




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































