
import { useState } from 'react';
import './App.css';
import Navbar from './Nevbar/Nevbar';
import Heading from './Heading/Heading';
import Option from './option/Option';


function App() {
    const[data1,setdata]=useState("");
    const[show,setShow]=useState(false);
    const[res,setres]=useState("");
    const[copy,setCopy]=useState('');
    const[showCopy,setShowCopy]=useState(false);
    async function userData(){
      try{
        const user={
            redirectURL:data1,
        }
        const data=await fetch("https://shorturl-production-9a71.up.railway.app/user",{
            method:"POST",
            headers:{
                "Content-type":"application/json",
                "Access-control-Allow-Origin":"*",
            },
         body:JSON.stringify(user),

        })
        const respon=await data.json();
        setres(respon);
        
        setShow(true);
      }
      catch{
        console.log("failed to connect with internet");
        
      }
        
    }
   
///////////copy to clipboard function
async function clipboard() {
  try{
    await navigator.clipboard.writeText(`shorturl-production-9a71.up.railway.app/${res.id}`);
    setCopy("Link copy");
    setShowCopy(true);
    setTimeout(()=>{setCopy("")},1000);
    setTimeout(()=>setShowCopy(false),1000);
  }
  catch(err){
    console.log(err,"text not copy");
  }
}
 return(
 <>
 <Navbar/>
 <Heading/>
<Option/>
 <div  className='shortPortion'>
    <div>
 <input id='inp' type="text" placeholder='Paste your link' onChange={(e)=>setdata(e.target.value)}/>
 <button id='btn' onClick={userData}>Make short url</button>
 </div>
 <div className='resulturl'>
 <h1 className='original'>Original url:<span id='urlData'>{data1}</span></h1>
 {/* show hide function of short Link  */}
{
show?
<div id='CopyLinkDi'>
  
  <h1 id='shorturl'>your short url is:<span id='result'>{`shorturl-production-9a71.up.railway.app/${res.id}`}</span></h1>


<button id='copy' onClick={clipboard}>copy Link</button>
{showCopy?<p id='clip'>{copy}</p>:""}



</div>:null
}
</div>
</div>

 </>
 )
}

export default App;




























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































